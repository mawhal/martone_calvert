# set options
options(stringsAsFactors = FALSE)
# load libraries
library(tidyverse)
library(mobr)
## read data files
# all data
ad <- read.csv( "../Data/R Code/Output from R/Martone_Hakai_data.csv")
# all metadata
am <- read.csv("../Data/R Code/Output from R/Martone_Hakai_metadata.csv" )
## Data cleaning for Anlaysis -- consider moving part of this to another script
# remove 2011 data
am <- am[ am$Year != "2011", ]
# remove Meay Channel
am <- am[ am$Site != "Meay Channel", ]
# add up all taxa that appear more than once in a single quadrat (e.g. barnacles or Hildenbrandia) -- go back to datasheets on some of these?
ad[ duplicated(ad), ] # generalize this to look at particular columns
# spread out all of the community data so sample (site,height,year,quadrat) are rows and species are columns
# add together taxa that are not unique to each quadrat
ad.simple <- ad %>%
group_by( UID, Taxon ) %>%
summarize( Abundance=sum(Abundance,na.rm=T))
# spread Taxon column out into many columns filled with abundance/cover data
ad.comm <- ad.simple %>%
spread( Taxon, Abundance, fill=0 )
am$UID[ !(am$UID %in% ad.comm$UID) ]
## read data files
# all data
ad <- read.csv( "../Data/R Code/Output from R/Martone_Hakai_data.csv")
## read data files
# all data
ad <- read.csv( "./Data/R Code/Output from R/Martone_Hakai_data.csv")
# all metadata
am <- read.csv("./Data/R Code/Output from R/Martone_Hakai_metadata.csv" )
## Data cleaning for Anlaysis -- consider moving part of this to another script
# remove 2011 data
am <- am[ am$Year != "2011", ]
# remove Meay Channel
am <- am[ am$Site != "Meay Channel", ]
# add up all taxa that appear more than once in a single quadrat (e.g. barnacles or Hildenbrandia) -- go back to datasheets on some of these?
ad[ duplicated(ad), ] # generalize this to look at particular columns
# spread out all of the community data so sample (site,height,year,quadrat) are rows and species are columns
# add together taxa that are not unique to each quadrat
ad.simple <- ad %>%
group_by( UID, Taxon ) %>%
summarize( Abundance=sum(Abundance,na.rm=T))
# spread Taxon column out into many columns filled with abundance/cover data
ad.comm <- ad.simple %>%
spread( Taxon, Abundance, fill=0 )
am$UID[ !(am$UID %in% ad.comm$UID) ]
ad[ ad$UID %in% am$UID[ !(am$UID %in% ad.comm$UID) ], ]
# restrict to rows selected in metadata
ad.comm <- ad.comm[ ad.comm$UID %in% am$UID, ]
ad.comm <- as.matrix(ad.comm[,-1])
# prepare the data
sea_mob_in <- make_mob_in( ad.comm , am )
# exploratory analysis - samples added with increasing spatial proximity
windows()
plot_rarefaction( sea_mob_in, "Site", "spat", lwd=4 )
# prepare the data
sea_mob_in <- make_mob_in( ad.comm , am )
library(mobr)
install.packages("mobr")
install_github("mobr")
library(devtools)
install_github("mobr")
library(mobr)
ad
install_github('MoBiodiv/mobr')
library(mobr)
# prepare the data
sea_mob_in <- make_mob_in( ad.comm , am )
# exploratory analysis - samples added with increasing spatial proximity
windows()
plot_rarefaction( sea_mob_in, "Site", "spat", lwd=4 )
# prepare the data
sea_mob_in <- make_mob_in( ad.comm , am )
sea_stats <- inv_stats
plot_abu( sea_mob_in, 'Site', type='rad', pooled=F, log='x')
# prepare the data
sea_mob_in <- make_mob_in( ad.comm , am )
## read data files
# all data
ad <- read.csv( "./Data/R Code/Output from R/Martone_Hakai_data.csv")
ad
unique(ad)
# set options
options(stringsAsFactors = FALSE)
# load libraries
library(tidyverse)
library(mobr)
## read data files
# all data
ad <- read.csv( "./Data/R Code/Output from R/Martone_Hakai_data.csv")
# all metadata
am <- read.csv("./Data/R Code/Output from R/Martone_Hakai_metadata.csv" )
## Data cleaning for Anlaysis -- consider moving part of this to another script
# remove 2011 data
am <- am[ am$Year != "2011", ]
# remove Meay Channel
am <- am[ am$Site != "Meay Channel", ]
# remove bare space, because we want to look for differences in numbers of individuals
ad <- ad[ ad$Taxon != "bare rock",]  # need to make sure using clean names here
# add up all taxa that appear more than once in a single quadrat (e.g. barnacles or Hildenbrandia) -- go back to datasheets on some of these?
ad[ duplicated(ad), ] # generalize this to look at particular columns
# spread out all of the community data so sample (site,height,year,quadrat) are rows and species are columns
# add together taxa that are not unique to each quadrat
ad.simple <- ad %>%
group_by( UID, Taxon ) %>%
summarize( Abundance=sum(Abundance,na.rm=T))
?%>%
# spread Taxon column out into many columns filled with abundance/cover data
ad.comm <- ad.simple %>%
spread( Taxon, Abundance, fill=0 )
am$UID[ !(am$UID %in% ad.comm$UID) ]
ad[ ad$UID %in% am$UID[ !(am$UID %in% ad.comm$UID) ], ]
# restrict to rows selected in metadata
ad.comm <- ad.comm[ ad.comm$UID %in% am$UID, ]
ad.comm <- as.matrix(ad.comm[,-1])
# prepare the data
sea_mob_in <- make_mob_in( ad.comm , am )
ad.comm
edit(ad.comm)
view(ad.comm)
View(ad.comm)
# prepare the data
sea_mob_in <- make_mob_in( ad.comm , am )
am
?make_mob_in
am$UID[ !(am$UID %in% ad.comm$UID) ]
ad[ ad$UID %in% am$UID[ !(am$UID %in% ad.comm$UID) ], ]
# restrict to rows selected in metadata
ad.comm <- ad.comm[ ad.comm$UID %in% am$UID, ]
ad.comm <- as.matrix(ad.comm[,-1])
# set options
options(stringsAsFactors = FALSE)
# load libraries
library(tidyverse)
library(mobr)
## read data files
# all data
ad <- read.csv( "../Data/R Code/Output from R/Martone_Hakai_data.csv")
## read data files
# all data
ad <- read.csv( "./Data/R Code/Output from R/Martone_Hakai_data.csv")
# all metadata
am <- read.csv("./Data/R Code/Output from R/Martone_Hakai_metadata.csv" )
## Data cleaning for Anlaysis -- consider moving part of this to another script
# remove 2011 data
am <- am[ am$Year != "2011", ]
# remove Meay Channel
am <- am[ am$Site != "Meay Channel", ]
# add up all taxa that appear more than once in a single quadrat (e.g. barnacles or Hildenbrandia) -- go back to datasheets on some of these?
ad[ duplicated(ad), ] # generalize this to look at particular columns
# spread out all of the community data so sample (site,height,year,quadrat) are rows and species are columns
# add together taxa that are not unique to each quadrat
ad.simple <- ad %>%
group_by( UID, Taxon ) %>%
summarize( Abundance=sum(Abundance,na.rm=T))
# spread Taxon column out into many columns filled with abundance/cover data
ad.comm <- ad.simple %>%
spread( Taxon, Abundance, fill=0 )
am$UID[ !(am$UID %in% ad.comm$UID) ]
ad[ ad$UID %in% am$UID[ !(am$UID %in% ad.comm$UID) ], ]
# restrict to rows selected in metadata
ad.comm <- ad.comm[ ad.comm$UID %in% am$UID, ]
ad.comm <- as.matrix(ad.comm[,-1])
# prepare the data
sea_mob_in <- make_mob_in( ad.comm , am )
am
class(am$Date)
ad.comm$UID %in% am$UID
ad.comm
